import{d as ee,u as te,r as L,z as N,W as se,D as P,L as B,w as l,b as e,M as ae,a as n,I as ne,e as le,n as o,t as i,l as oe,a1 as O,R as T,S as _,f as c,a2 as ie,a3 as re,O as f,P as v,Q as b,c as U,m as de,V as ue,F as ce,h as M,s as ge,o as S,_ as pe}from"./index-CdlCrrVJ.js";import{u as me,a as fe}from"./useMeasurementSystem-DzoP_qGM.js";import{a as ve}from"./icon-128-BtJN6KDX.js";const be={class:"title-inline"},_e=["src"],he={class:"max-w-md md:max-w-3xl mx-auto bg-white dark:bg-neutral-900 rounded-xl shadow-lg p-6 space-y-6"},xe={class:"text-lg font-semibold text-gray-800 dark:text-gray-100"},ye={class:"flex items-center justify-between"},Ie={class:"text-sm font-medium text-gray-700 dark:text-gray-200"},ke={class:"flex items-center justify-between gap-4"},Se={class:"text-sm font-medium text-gray-700 dark:text-gray-200"},Fe={class:"flex items-center justify-between gap-4"},we={class:"text-sm font-medium text-gray-700 dark:text-gray-200"},Ve={slot:"content",class:"p-3 space-y-4 advanced-settings"},Le={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3"},Me={key:0,class:"text-xs font-semibold text-red-600 dark:text-red-400 pt-1"},Ce={class:"railroad-hint text-xs text-gray-500 dark:text-gray-200"},We={class:"railroad-toggle-shell"},Ne={class:"space-y-2"},Pe={class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},Be={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},Oe={class:"space-y-2"},Te={class:"text-sm font-semibold text-gray-700 dark:text-gray-200"},Ue={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},ze={class:"flex gap-2 pt-1"},Ae={class:"pt-2"},Ee={class:"border-t pt-4"},je={class:"text-md font-medium text-gray-800 dark:text-gray-100 mb-2"},Ge={class:"text-sm text-gray-600 dark:text-gray-300"},He={class:"text-sm text-gray-600 dark:text-gray-300"},Re=ee({__name:"SettingsPage_fixed",setup(qe){const{t:r,language:z,setLanguage:A}=te(),d=me(),h=L(!1),C=L(!1),W=s=>{const t=document.documentElement,a=document.body,g=document.querySelector("ion-app");t.classList.toggle("dark",s),a.classList.toggle("ion-theme-dark",s),a.classList.toggle("dark",s),g&&(g.classList.toggle("dark",s),g.classList.toggle("ion-theme-dark",s)),t.style.colorScheme=s?"dark":"light",localStorage.setItem("darkMode",s.toString())};N(h,s=>{C.value&&W(s)}),se(()=>{const s=localStorage.getItem("darkMode");h.value=s==="true",W(h.value),C.value=!0});const{state:p,reset:E}=fe(),u=L(p.fabricWidthOptions.map(s=>d.fromInches(s).value.toFixed(d.isMetric?1:0)));u.value.length||(u.value=[""]);const x=()=>{const s=[...u.value],t=new Set,a=[];s.forEach((g,m)=>{const y=String(g!=null?g:"").trim();if(!y){s[m]="";return}const V=parseFloat(y);if(!isNaN(V)&&V>0){const k=d.toInches(V,d.getUnitLabel());if(t.has(k))s[m]="";else{t.add(k),a.push(k);const D=d.fromInches(k);s[m]=D.value.toFixed(d.isMetric?1:0)}}else s[m]=""}),s.length||s.push(""),u.value=s,p.fabricWidthOptions=[...a].sort((g,m)=>g-m)},j=(s,t)=>{var m,y;const a=String((y=(m=t==null?void 0:t.detail)==null?void 0:m.value)!=null?y:"").trim(),g=[...u.value];g[s]=a,u.value=g,x()},G=()=>{u.value=[...u.value,""],x()},H=()=>{if(!u.value.length){u.value=[""];return}const s=[...u.value];s[s.length-1]="",u.value=s,x()};x();const R=P(()=>Number(p.rfSnapSeparation)<=0),q=(s,t)=>{const a=parseFloat(String(t!=null?t:""));if(!isFinite(a)||a<0)return;const g=d.toInches(a,d.getUnitLabel());p[s]=g},Q=(s,t)=>{p[s]=!!t},Z=(s,t)=>{const a=parseFloat(String(t!=null?t:""));!isFinite(a)||a<=0||(p.ripplefoldFullness[s]=a)},J=P(()=>z.value),K=s=>{var a;const t=(a=s==null?void 0:s.detail)==null?void 0:a.value;t&&(t==="en"||t==="es"||t==="fr"||t==="pt")&&A(t)},X=s=>{var a;const t=(a=s==null?void 0:s.detail)==null?void 0:a.value;(t==="imperial"||t==="metric")&&d.setSystem(t)},F=s=>d.fromInches(s).value.toFixed(2),w=(s,t)=>{var a;return q(s,(a=t==null?void 0:t.detail)==null?void 0:a.value)},Y=(s,t)=>{var a;return Q(s,(a=t==null?void 0:t.detail)==null?void 0:a.checked)},I=(s,t)=>{var a;return Z(s,(a=t==null?void 0:t.detail)==null?void 0:a.value)},$=()=>{E(),u.value=p.fabricWidthOptions.map(s=>d.fromInches(s).value.toFixed(d.isMetric?1:0)),u.value.length||(u.value=[""]),x()};return N(()=>d.system.value,()=>{u.value=p.fabricWidthOptions.map(s=>d.fromInches(s).value.toFixed(d.isMetric?1:0)),u.value.length||(u.value=[""])}),(s,t)=>(S(),B(e(ae),{class:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-neutral-900 dark:to-neutral-950"},{default:l(()=>[n(e(oe),{class:"bg-white dark:bg-neutral-950 shadow-lg"},{default:l(()=>[n(e(ne),{class:"bg-transparent"},{default:l(()=>[n(e(le),{class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},{default:l(()=>[o("span",be,[o("img",{src:e(ve),class:"w-7 h-7 rounded",alt:""},null,8,_e),o("span",null,i(e(r).settings.title),1)])]),_:1})]),_:1})]),_:1}),n(e(ge),{class:"ion-padding bg-transparent"},{default:l(()=>[o("div",he,[o("h2",xe,i(e(r).settings.appPreferences),1),o("div",ye,[o("span",Ie,i(e(r).settings.darkMode),1),n(e(O),{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),slot:"end",class:"text-blue-500"},null,8,["modelValue"])]),o("div",ke,[o("span",Se,i(e(r).settings.language),1),n(e(T),{value:J.value,onIonChange:K,interface:"action-sheet",class:"text-gray-700 dark:text-gray-100 language-select"},{default:l(()=>[n(e(_),{value:"en"},{default:l(()=>[...t[9]||(t[9]=[c("English",-1)])]),_:1}),n(e(_),{value:"es"},{default:l(()=>[...t[10]||(t[10]=[c("Español",-1)])]),_:1}),n(e(_),{value:"fr"},{default:l(()=>[...t[11]||(t[11]=[c("Français",-1)])]),_:1}),n(e(_),{value:"pt"},{default:l(()=>[...t[12]||(t[12]=[c("Português",-1)])]),_:1})]),_:1},8,["value"])]),o("div",Fe,[o("span",we,i(e(r).settings.measurementSystem),1),n(e(T),{value:e(d).system,onIonChange:X,interface:"action-sheet",class:"text-gray-700 dark:text-gray-100"},{default:l(()=>[n(e(_),{value:"imperial"},{default:l(()=>[c(i(e(r).settings.imperial),1)]),_:1}),n(e(_),{value:"metric"},{default:l(()=>[c(i(e(r).settings.metric),1)]),_:1})]),_:1},8,["value"])]),n(e(ie),{class:"mt-4"},{default:l(()=>[n(e(re),{value:"advanced"},{default:l(()=>[n(e(f),{slot:"header",class:"advanced-accordion-header rounded-lg"},{default:l(()=>[n(e(v),{class:"font-medium"},{default:l(()=>[c(i(e(r).settings.advancedCalculationSettings),1)]),_:1})]),_:1}),o("div",Ve,[o("div",Le,[n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg align-left-input"},{default:l(()=>[n(e(v),{position:"stacked"},{default:l(()=>[c(i(e(r).settings.sideMarginPerPanel)+" ("+i(e(d).getUnitLabel())+")",1)]),_:1}),n(e(b),{modelValue:F(e(p).widthMargin),type:"number",onIonInput:t[1]||(t[1]=a=>w("widthMargin",a))},null,8,["modelValue"])]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg align-left-input"},{default:l(()=>[n(e(v),{position:"stacked"},{default:l(()=>[c(i(e(r).settings.easeAllowance)+" ("+i(e(d).getUnitLabel())+")",1)]),_:1}),n(e(b),{modelValue:F(e(p).easeAllowance),type:"number",onIonInput:t[2]||(t[2]=a=>w("easeAllowance",a))},null,8,["modelValue"])]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg align-left-input"},{default:l(()=>[n(e(v),{position:"stacked"},{default:l(()=>[c(i(e(r).settings.snapSeparation)+" ("+i(e(d).getUnitLabel())+")",1)]),_:1}),n(e(b),{modelValue:F(e(p).rfSnapSeparation),type:"number",step:"0.01",onIonInput:t[3]||(t[3]=a=>w("rfSnapSeparation",a))},null,8,["modelValue"]),R.value?(S(),U("p",Me,i(e(r).settings.mustBeGreaterThanZero),1)):de("",!0)]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg railroad-toggle-item"},{default:l(()=>[n(e(v),{position:"stacked"},{default:l(()=>[c(i(e(r).settings.railroadStrict),1)]),_:1}),o("p",Ce,i(e(r).settings.onlyIfPanelHeightLessThanFabricWidth),1),o("div",We,[n(e(O),{class:"railroad-toggle",checked:e(p).railroadStrict,onIonChange:t[4]||(t[4]=a=>Y("railroadStrict",a))},null,8,["checked"])])]),_:1})]),o("div",Ne,[o("div",Pe,i(e(r).settings.ripplefoldFullnessFactors),1),o("div",Be,[n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg"},{default:l(()=>[n(e(v),{position:"stacked",class:"whitespace-nowrap text-center"},{default:l(()=>[...t[13]||(t[13]=[c("60%",-1)])]),_:1}),n(e(b),{modelValue:String(e(p).ripplefoldFullness[60]),type:"number",step:"0.01",onIonInput:t[5]||(t[5]=a=>I("60",a))},null,8,["modelValue"])]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg"},{default:l(()=>[n(e(v),{position:"stacked",class:"whitespace-nowrap text-center"},{default:l(()=>[...t[14]||(t[14]=[c("80%",-1)])]),_:1}),n(e(b),{modelValue:String(e(p).ripplefoldFullness[80]),type:"number",step:"0.01",onIonInput:t[6]||(t[6]=a=>I("80",a))},null,8,["modelValue"])]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg"},{default:l(()=>[n(e(v),{position:"stacked",class:"whitespace-nowrap text-center"},{default:l(()=>[...t[15]||(t[15]=[c("100%",-1)])]),_:1}),n(e(b),{modelValue:String(e(p).ripplefoldFullness[100]),type:"number",step:"0.01",onIonInput:t[7]||(t[7]=a=>I("100",a))},null,8,["modelValue"])]),_:1}),n(e(f),{lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg"},{default:l(()=>[n(e(v),{position:"stacked",class:"whitespace-nowrap text-center"},{default:l(()=>[...t[16]||(t[16]=[c("120%",-1)])]),_:1}),n(e(b),{modelValue:String(e(p).ripplefoldFullness[120]),type:"number",step:"0.01",onIonInput:t[8]||(t[8]=a=>I("120",a))},null,8,["modelValue"])]),_:1})])]),o("div",Oe,[o("div",Te,i(e(r).settings.fabricWidthOptions)+" ("+i(e(d).getUnitLabel())+")",1),o("div",Ue,[(S(!0),U(ce,null,ue(u.value,(a,g)=>(S(),B(e(f),{key:g,lines:"none",class:"bg-gray-50 dark:bg-neutral-800 rounded-lg"},{default:l(()=>[n(e(v),{position:"stacked",class:"text-center"},{default:l(()=>[c("#"+i(g+1),1)]),_:2},1024),n(e(b),{type:"number",inputmode:"numeric",step:e(d).isMetric?"0.1":"1",modelValue:a,onIonInput:m=>j(g,m)},null,8,["step","modelValue","onIonInput"])]),_:2},1024))),128))]),o("div",ze,[n(e(M),{size:"small",fill:"outline",onClick:G},{default:l(()=>[c(i(e(r).settings.addWidth),1)]),_:1}),n(e(M),{size:"small",fill:"clear",color:"medium",onClick:H},{default:l(()=>[c(i(e(r).settings.clearLast),1)]),_:1})])]),o("div",Ae,[n(e(M),{fill:"outline",size:"small",onClick:$},{default:l(()=>[c(i(e(r).settings.restoreDefaults),1)]),_:1})])])]),_:1})]),_:1}),o("div",Ee,[o("h3",je,i(e(r).settings.about),1),o("p",Ge,i(e(r).settings.version),1),o("p",He,i(e(r).settings.description),1)])])]),_:1})]),_:1}))}}),Ke=pe(Re,[["__scopeId","data-v-2e7bfac5"]]);export{Ke as default};
