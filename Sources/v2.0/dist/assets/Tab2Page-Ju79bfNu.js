import{d as q,u as T,r as U,W as O,X as B,L as m,w as o,b as t,M as H,a as n,I as b,e as _,n as l,t as r,l as x,c as d,Y as N,V as P,F as p,s as V,o as u,Z as D,$ as R,P as v,f as g,O as W,m as y,q as E,h as k,i as w,j as z,a0 as J,_ as M}from"./index-CdlCrrVJ.js";import{a as $}from"./icon-128-BtJN6KDX.js";const Y={class:"title-inline"},j=["src"],G={class:"title-inline"},X=["src"],Z={key:0,class:"text-center py-8"},K={class:"text-gray-500 dark:text-gray-400"},Q={class:"font-semibold text-gray-800 dark:text-gray-100"},ee={class:"text-gray-600 dark:text-gray-300"},te={class:"text-gray-600 dark:text-gray-300"},se={key:0,class:"text-gray-600 dark:text-gray-300"},ae={class:"text-gray-600 dark:text-gray-300 flex items-center gap-2"},re={class:"text-gray-600 dark:text-gray-300"},oe={key:1,class:"text-gray-600 dark:text-gray-300"},ne={slot:"end",class:"flex items-center gap-1"},ie=q({__name:"Tab2Page",setup(le){const{t:a}=T(),I=s=>localStorage.getItem(s),h=U([]),C=s=>s==="Railroad"?"bg-emerald-500/15 text-emerald-400 border-emerald-400/40":"bg-sky-500/15 text-sky-400 border-sky-400/40",c=()=>{try{const s=I("calculationHistory");s&&(h.value=JSON.parse(s))}catch(s){console.warn("Storage not available:",s)}},F=()=>{try{localStorage.setItem("calculationHistory",JSON.stringify(h.value))}catch(s){console.warn("Failed to save history:",s)}},S=s=>{h.value.splice(s,1),F()},A=async s=>{const f="".concat(a.value.results.title,"\n\n").concat(a.value.results.requiredFabric,": ").concat(s.requiredFabric," ").concat(a.value.results.yards,"\n").concat(a.value.results.dimensions," ").concat(s.width).concat(s.widthFraction?" "+s.widthFraction:""," ").concat(s.widthUnit||"in"," Ã— ").concat(s.height).concat(s.heightFraction?" "+s.heightFraction:""," ").concat(s.heightUnit||"in","\n").concat(a.value.results.productType," ").concat(s.productType=="1"?a.value.results.ripplefold:a.value.results.pinchPleated,"\n").concat(a.value.results.fullness," ").concat(s.fullness,"\n").concat(a.value.calculator.hem,": ").concat(s.hem," ").concat(s.hemUnit||"in","\n").concat(a.value.settings.easeAllowance,": ").concat(s.easeAllowance,"\n").concat(a.value.results.fabricWidths," ").concat(s.fabricWidths,"\n").concat(a.value.results.fabricCuts," ").concat(s.fabricCuts,"\n").concat(a.value.results.cutLength," ").concat(s.fabricCutLength).concat(s.fabricCutsFraction?" "+s.fabricCutsFraction:""," ").concat(s.cutLengthUnit||"in","\n").concat(a.value.results.orientation," ").concat(s.fabricOrientation==="Railroad"?a.value.results.railroad:a.value.results.regular)+(s.requiredSnaps>0?"\n".concat(a.value.results.snapsRequired," ").concat(s.requiredSnaps):""),e=()=>{const i=document.createElement("textarea");i.value=f,i.setAttribute("readonly","true"),i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.opacity="0",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)};try{navigator.clipboard&&window.isSecureContext?await navigator.clipboard.writeText(f):e()}catch(i){console.error("Failed to copy calculation:",i)}};return O(()=>{c()}),B(()=>{c(),console.log("History view entered, reloading data")}),(s,f)=>(u(),m(t(H),{class:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-neutral-900 dark:to-neutral-950"},{default:o(()=>[n(t(x),{class:"bg-white dark:bg-neutral-950 shadow-lg"},{default:o(()=>[n(t(b),{class:"bg-transparent"},{default:o(()=>[n(t(_),{class:"text-2xl font-bold text-gray-800 dark:text-gray-100"},{default:o(()=>[l("span",Y,[l("img",{src:t($),class:"w-7 h-7 rounded",alt:""},null,8,j),l("span",null,r(t(a).history.title),1)])]),_:1})]),_:1})]),_:1}),n(t(V),{class:"ion-padding",fullscreen:!0,"force-overscroll":!1},{default:o(()=>[n(t(x),{collapse:"condense",class:"bg-white dark:bg-neutral-950"},{default:o(()=>[n(t(b),{class:"bg-transparent"},{default:o(()=>[n(t(_),{size:"large",class:"text-xl font-semibold text-gray-700 dark:text-gray-200"},{default:o(()=>[l("span",G,[l("img",{src:t($),class:"w-7 h-7 rounded",alt:""},null,8,X),l("span",null,r(t(a).history.title),1)])]),_:1})]),_:1})]),_:1}),h.value.length===0?(u(),d("div",Z,[l("p",K,r(t(a).history.noCalculationsYet),1)])):(u(),m(t(N),{key:1},{default:o(()=>[(u(!0),d(p,null,P(h.value,(e,i)=>(u(),m(t(D),{key:i,class:"mb-4"},{default:o(()=>[n(t(R),{class:"bg-gray-100 dark:bg-neutral-800"},{default:o(()=>[n(t(v),{class:"text-sm font-medium text-gray-800 dark:text-gray-100"},{default:o(()=>[g(r(new Date(e.timestamp).toLocaleString()),1)]),_:2},1024)]),_:2},1024),n(t(W),{class:"bg-white dark:bg-neutral-900 rounded-lg shadow-sm"},{default:o(()=>[n(t(v),null,{default:o(()=>[l("h2",Q,r(t(a).history.fabric)+": "+r(e.requiredFabric)+" "+r(t(a).results.yards),1),l("p",ee,r(t(a).history.width)+": "+r(e.width)+" "+r(e.widthFraction||"")+" "+r(e.widthUnit||"in")+" | "+r(t(a).history.height)+": "+r(e.height)+" "+r(e.heightFraction||"")+" "+r(e.heightUnit||"in"),1),l("p",te,r(t(a).history.product)+": "+r(e.productType=="1"?t(a).results.ripplefold:t(a).results.pinchPleated)+" | "+r(t(a).results.fullness)+": "+r(e.fullness),1),typeof e.hem=="number"&&e.hem>0||typeof e.hem=="string"&&parseFloat(e.hem)>0||typeof e.easeAllowance=="number"&&e.easeAllowance>0?(u(),d("p",se,[typeof e.hem=="number"&&e.hem>0||typeof e.hem=="string"&&parseFloat(e.hem)>0?(u(),d(p,{key:0},[g(r(t(a).calculator.hem)+": "+r(e.hem)+" "+r(e.hemUnit||"in"),1)],64)):y("",!0),(typeof e.hem=="number"&&e.hem>0||typeof e.hem=="string"&&parseFloat(e.hem)>0)&&typeof e.easeAllowance=="number"&&e.easeAllowance>0?(u(),d(p,{key:1},[g(" | ")],64)):y("",!0),typeof e.easeAllowance=="number"&&e.easeAllowance>0?(u(),d(p,{key:2},[g(r(t(a).settings.easeAllowance)+": "+r(e.easeAllowance),1)],64)):y("",!0)])):y("",!0),l("p",ae,[g(r(t(a).results.orientation)+": ",1),l("span",{class:E(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide border",C(e.fabricOrientation)])},r(e.fabricOrientation==="Railroad"?t(a).results.railroad:t(a).results.regular),3)]),l("p",re,r(t(a).history.cuts)+": "+r(e.fabricCuts)+" x "+r(e.fabricCutLength)+" "+r(e.fabricCutsFraction||"")+" "+r(e.cutLengthUnit||"in"),1),e.requiredSnaps>0?(u(),d("p",oe,r(t(a).history.snaps)+": "+r(e.requiredSnaps),1)):y("",!0)]),_:2},1024),l("div",ne,[n(t(k),{fill:"clear",color:"medium",onClick:L=>A(e),"aria-label":"Copy calculation"},{default:o(()=>[n(t(w),{icon:t(z)},null,8,["icon"])]),_:1},8,["onClick"]),n(t(k),{fill:"clear",color:"danger",onClick:L=>S(i),"aria-label":"Delete calculation"},{default:o(()=>[n(t(w),{icon:t(J)},null,8,["icon"])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}))}}),he=M(ie,[["__scopeId","data-v-302a699f"]]);export{he as default};
